#select_local
  %b= "Select a Locale: "
  %br
  - for locale in @locales do
    %span{ :class => session[:locale] == locale ? "local_selected" : ""}
      = link_to "#{locale.name}", translations_path(:locale_id => locale.id, :namespace_id => @namespace ? @namespace.id : nil)
      = " | "
  %hr
#select_namespace
  %b= "Select a namespace"
  %br
  - for namespace in @namespaces do
    %span{ :class => @namespace == namespace ? "namespace_selected" : ""}
      - unless namespace.children.size < 0
        = link_to "#{namespace.name}", translations_path(:locale_id => session[:locale].id, :namespace_id => namespace.id)
        = " | "

- if @namespace
  %table
    %tr
      %th= "keys"
      %th= "English"
      %th= session[:locale].name
      %th
    - for key in @namespace.children do
      - unless key.namespace
        %tr
          %td= key.name
          %td= key.find_translation_by_locale(1).value if key.find_translation_by_locale(1)
          %td
            - if key.find_translation_by_locale(session[:locale].id)
              - form_for key.find_translation_by_locale(session[:locale].id) do |f|
                = f.text_field :value, :value => key.find_translation_by_locale(session[:locale].id).value
                = f.submit "Save"
            - else
              - form_for Translation.new do |f|
                = f.text_field :value
                = f.hidden_field :locale_id, :value => session[:locale].id
                = f.hidden_field :key_id, :value => key.id
                = f.submit "Save"